import React, { useState, useEffect, useRef } from 'react';
import { 
  ShoppingBag, 
  Menu, 
  X, 
  ChevronRight, 
  Star, 
  Instagram, 
  Facebook, 
  Heart, 
  Gamepad2,
  Truck,
  Utensils,
  Gift,
  Trophy,
  UserCircle,
  Sparkles,
  Rocket,
  Cpu,
  Users,
  PartyPopper,
  Settings,
  Plus,
  Trash2,
  Lock,
  Unlock,
  Image as ImageIcon,
  Upload,
  Link as LinkIcon
} from 'lucide-react';

// --- Initial Data ---
const INITIAL_PRODUCTS = [
  {
    id: 1,
    name: "The 'Golden Retriever' Sugar Cookies",
    description: "Soft, buttery vanilla bean sugar cookies that are pure sunshine. Topped with golden royal icing.",
    price: 24.00,
    category: "Signature Sweets",
    image: "https://images.unsplash.com/photo-1558961363-fa8fdf82db35?auto=format&fit=crop&q=80&w=400"
  },
  {
    id: 2,
    name: "Dalmatian Chocolate Chip Loaf",
    description: "Double chocolate marble cake with white chocolate spots. A favorite for tea time.",
    price: 18.50,
    category: "Loaves & Cakes",
    image: "https://images.unsplash.com/photo-1586985289906-40698897d504?auto=format&fit=crop&q=80&w=400"
  },
  {
    id: 3,
    name: "Pug-kin Spice Muffins",
    description: "Chunky, cozy pumpkin spice muffins with a cream cheese swirl center.",
    price: 15.00,
    category: "Breakfast Treats",
    image: "https://images.unsplash.com/photo-1558401391-7899b4bd5bbf?auto=format&fit=crop&q=80&w=400"
  }
];

// --- Cart Drawer Component ---
const CartDrawer = ({ isOpen, onClose, cartItems, onRemove }) => {
  const total = cartItems.reduce((sum, item) => sum + item.price, 0);

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-[110] overflow-hidden">
      <div className="absolute inset-0 bg-slate-900/40 backdrop-blur-sm" onClick={onClose} />
      <div className="absolute inset-y-0 right-0 max-w-full flex">
        <div className="w-screen max-w-md bg-white shadow-2xl flex flex-col">
          <div className="p-6 border-b flex items-center justify-between bg-pink-50">
            <h2 className="text-xl font-black flex items-center gap-2">
              <ShoppingBag className="text-pink-500" /> Your Treats
            </h2>
            <button onClick={onClose} className="p-2 hover:bg-white rounded-full transition-colors"><X /></button>
          </div>

          <div className="flex-1 overflow-y-auto p-6">
            {cartItems.length === 0 ? (
              <div className="h-full flex flex-col items-center justify-center text-slate-400 space-y-4">
                <div className="w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center">
                  <ShoppingBag size={32} />
                </div>
                <p className="font-medium">Your cart is empty!</p>
              </div>
            ) : (
              <div className="space-y-4">
                {cartItems.map((item, index) => (
                  <div key={`${item.id}-${index}`} className="flex gap-4 p-3 bg-slate-50 rounded-2xl border border-slate-100 relative group">
                    <img src={item.image} className="w-16 h-16 rounded-xl object-cover" alt={item.name} />
                    <div className="flex-1 min-w-0">
                      <p className="font-bold text-slate-800 text-sm truncate">{item.name}</p>
                      <p className="text-pink-500 font-bold text-sm">${item.price.toFixed(2)}</p>
                    </div>
                    <button 
                      onClick={() => onRemove(index)}
                      className="p-1.5 text-slate-300 hover:text-red-500 transition-colors"
                    >
                      <Trash2 size={16} />
                    </button>
                  </div>
                ))}
              </div>
            )}
          </div>

          <div className="p-6 border-t bg-slate-50">
            <div className="flex justify-between items-center mb-6">
              <span className="text-slate-500 font-medium">Subtotal</span>
              <span className="text-2xl font-black text-slate-900">${total.toFixed(2)}</span>
            </div>
            <button 
              disabled={cartItems.length === 0}
              className="w-full py-4 bg-pink-500 text-white rounded-2xl font-bold shadow-lg shadow-pink-100 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50 disabled:hover:scale-100"
            >
              Checkout Now
            </button>
            <p className="text-center text-[10px] text-slate-400 mt-4 uppercase tracking-widest font-bold">Lucy's Bakery ‚Ä¢ Handmade with Love</p>
          </div>
        </div>
      </div>
    </div>
  );
};

// --- Mini-Game Component ---
const CatchTheTreat = () => {
  const [score, setScore] = useState(0);
  const [basketPos, setBasketPos] = useState(50);
  const [treats, setTreats] = useState([]);
  const [gameActive, setGameActive] = useState(false);

  const startGame = () => {
    setScore(0);
    setTreats([]);
    setGameActive(true);
  };

  useEffect(() => {
    if (!gameActive) return;
    const interval = setInterval(() => {
      setTreats(prev => [...prev, { id: Math.random(), x: Math.random() * 90, y: 0 }]);
    }, 1000);
    return () => clearInterval(interval);
  }, [gameActive]);

  useEffect(() => {
    if (!gameActive) return;
    const moveInterval = setInterval(() => {
      setTreats(prev => {
        const next = prev.map(t => ({ ...t, y: t.y + 2 }));
        const caught = next.filter(t => t.y > 80 && t.y < 90 && Math.abs(t.x - basketPos) < 10);
        if (caught.length > 0) setScore(s => s + 1);
        return next.filter(t => t.y < 100 && !caught.includes(t));
      });
    }, 20);
    return () => clearInterval(moveInterval);
  }, [gameActive, basketPos]);

  return (
    <div className="bg-slate-900 rounded-3xl p-6 text-white overflow-hidden relative h-[400px]" 
         onMouseMove={(e) => {
           const rect = e.currentTarget.getBoundingClientRect();
           setBasketPos(((e.clientX - rect.left) / rect.width) * 100);
         }}>
      {!gameActive ? (
        <div className="h-full flex flex-col items-center justify-center space-y-4">
          <Gamepad2 size={48} className="text-pink-500 animate-bounce" />
          <h3 className="text-2xl font-bold">Catch the Treats!</h3>
          <p className="text-slate-400">Move your mouse to catch falling cookies.</p>
          <button onClick={startGame} className="px-6 py-2 bg-pink-500 rounded-full font-bold">Start Game</button>
        </div>
      ) : (
        <>
          <div className="absolute top-4 left-4 text-xl font-bold">Score: {score}</div>
          {treats.map(t => (
            <div key={t.id} className="absolute text-2xl" style={{ left: `${t.x}%`, top: `${t.y}%` }}>üç™</div>
          ))}
          <div className="absolute bottom-4 text-4xl" style={{ left: `${basketPos}%`, transform: 'translateX(-50%)' }}>üê∂</div>
          <button onClick={() => setGameActive(false)} className="absolute top-4 right-4 text-xs text-slate-500">Quit</button>
        </>
      )}
    </div>
  );
};

// --- Manager Portal Modal with Password Lock ---
const BakerPortal = ({ isOpen, onClose, products, onAdd, onDelete }) => {
  const [form, setForm] = useState({ 
    name: '', 
    description: '', 
    price: '', 
    category: 'Signature Sweets',
    image: '' 
  });
  const [passwordInput, setPasswordInput] = useState('');
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [error, setError] = useState('');
  const [uploading, setUploading] = useState(false);
  const fileInputRef = useRef(null);

  const CORRECT_PASSWORD = 'pickles!';

  useEffect(() => {
    if (!isOpen) {
      setIsAuthenticated(false);
      setPasswordInput('');
      setError('');
    }
  }, [isOpen]);

  const handleAuth = (e) => {
    e.preventDefault();
    if (passwordInput === CORRECT_PASSWORD) {
      setIsAuthenticated(true);
      setError('');
    } else {
      setError('Wrong password! Try again.');
    }
  };

  const handleFileUpload = (e) => {
    const file = e.target.files[0];
    if (!file) return;

    setUploading(true);
    const reader = new FileReader();
    reader.onloadend = () => {
      setForm(prev => ({ ...prev, image: reader.result }));
      setUploading(false);
    };
    reader.readAsDataURL(file);
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    onAdd({
      ...form,
      id: Date.now(),
      price: parseFloat(form.price),
      image: form.image || "https://images.unsplash.com/photo-1558961363-fa8fdf82db35?auto=format&fit=crop&q=80&w=400"
    });
    setForm({ name: '', description: '', price: '', category: 'Signature Sweets', image: '' });
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-[120] flex items-center justify-center p-4">
      <div className="absolute inset-0 bg-slate-900/80 backdrop-blur-md" onClick={onClose} />
      <div className="relative bg-white w-full max-w-5xl max-h-[90vh] rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col">
        <div className="p-6 border-b flex justify-between items-center bg-pink-50">
          <h2 className="text-2xl font-black text-slate-900 flex items-center gap-2">
            <Settings className="text-pink-500" /> Baker's Portal
          </h2>
          <button onClick={onClose} className="p-2 hover:bg-white rounded-full transition-colors"><X /></button>
        </div>

        {!isAuthenticated ? (
          <div className="flex-1 flex flex-col items-center justify-center p-12 space-y-6 text-center">
            <div className="w-20 h-20 bg-pink-100 rounded-full flex items-center justify-center text-pink-500 mb-2">
              <Lock size={40} />
            </div>
            <div>
              <h3 className="text-2xl font-black">Private Kitchen Access</h3>
              <p className="text-slate-500">Only Lucy and her team can enter here!</p>
            </div>
            <form onSubmit={handleAuth} className="w-full max-w-xs space-y-3">
              <input 
                type="password" 
                autoFocus
                placeholder="Enter password" 
                className={`w-full p-4 bg-slate-100 rounded-2xl text-center font-bold focus:ring-2 outline-none transition-all ${error ? 'ring-2 ring-red-400' : 'focus:ring-pink-300'}`}
                value={passwordInput}
                onChange={e => setPasswordInput(e.target.value)}
              />
              {error && <p className="text-red-500 text-xs font-bold">{error}</p>}
              <button className="w-full py-4 bg-slate-900 text-white rounded-2xl font-bold shadow-lg flex items-center justify-center gap-2 hover:bg-slate-800 transition-colors">
                <Unlock size={18} /> Unlock Portal
              </button>
            </form>
          </div>
        ) : (
          <div className="flex-1 overflow-y-auto p-8 grid lg:grid-cols-2 gap-12">
            <form onSubmit={handleSubmit} className="space-y-4">
              <h3 className="text-xl font-bold flex items-center gap-2 mb-4">
                <Plus size={24} className="text-pink-500" /> New Treat Details
              </h3>
              
              <div className="space-y-1">
                <label className="text-xs font-bold text-slate-400 uppercase ml-1">Name</label>
                <input required placeholder="e.g. Beagle Bagels" className="w-full p-3 bg-slate-50 rounded-xl border border-transparent focus:border-pink-200 outline-none" value={form.name} onChange={e => setForm({...form, name: e.target.value})} />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-1">
                  <label className="text-xs font-bold text-slate-400 uppercase ml-1">Price ($)</label>
                  <input required type="number" step="0.01" placeholder="0.00" className="w-full p-3 bg-slate-50 rounded-xl border border-transparent focus:border-pink-200 outline-none" value={form.price} onChange={e => setForm({...form, price: e.target.value})} />
                </div>
                <div className="space-y-1">
                  <label className="text-xs font-bold text-slate-400 uppercase ml-1">Category</label>
                  <select className="w-full p-3 bg-slate-50 rounded-xl border border-transparent focus:border-pink-200 outline-none" value={form.category} onChange={e => setForm({...form, category: e.target.value})}>
                    <option>Signature Sweets</option>
                    <option>Loaves & Cakes</option>
                    <option>Breakfast Treats</option>
                  </select>
                </div>
              </div>

              <div className="space-y-1">
                <label className="text-xs font-bold text-slate-400 uppercase ml-1">Treat Picture</label>
                <div className="flex gap-2">
                  <button 
                    type="button"
                    onClick={() => fileInputRef.current?.click()}
                    className="flex-1 p-3 bg-slate-100 rounded-xl border-2 border-dashed border-slate-300 hover:border-pink-400 hover:bg-pink-50 transition-all flex items-center justify-center gap-2 text-slate-600 font-bold text-sm"
                  >
                    <Upload size={18} /> {uploading ? 'Uploading...' : 'Upload Photo'}
                  </button>
                  <div className="flex-[1.5] relative">
                    <LinkIcon size={16} className="absolute left-3 top-3.5 text-slate-400" />
                    <input 
                      placeholder="...or paste image URL" 
                      className="w-full p-3 pl-10 bg-slate-50 rounded-xl border border-transparent focus:border-pink-200 outline-none text-sm" 
                      value={form.image.startsWith('data:') ? '' : form.image} 
                      onChange={e => setForm({...form, image: e.target.value})} 
                    />
                  </div>
                </div>
                <input 
                  type="file" 
                  ref={fileInputRef} 
                  className="hidden" 
                  accept="image/*" 
                  onChange={handleFileUpload}
                />
              </div>

              <div className="space-y-1">
                <label className="text-xs font-bold text-slate-400 uppercase ml-1">Description</label>
                <textarea required placeholder="What makes this treat special?" className="w-full p-3 bg-slate-50 rounded-xl h-24 border border-transparent focus:border-pink-200 outline-none resize-none" value={form.description} onChange={e => setForm({...form, description: e.target.value})} />
              </div>

              <div className="pt-2">
                <button className="w-full py-4 bg-pink-500 text-white rounded-2xl font-bold shadow-lg shadow-pink-100 hover:scale-[1.01] transition-transform flex items-center justify-center gap-2">
                  <Plus size={20} /> Add to Menu
                </button>
              </div>

              {form.image && (
                <div className="mt-4 p-4 bg-slate-50 rounded-2xl border border-dashed border-slate-200 relative group">
                  <p className="text-[10px] font-bold text-slate-400 uppercase mb-2">Image Preview</p>
                  <img src={form.image} className="w-full h-32 object-cover rounded-xl shadow-inner" alt="Preview" onError={(e) => e.target.src = 'https://via.placeholder.com/400x200?text=Invalid+Image+URL'} />
                  <button 
                    type="button" 
                    onClick={() => setForm({...form, image: ''})}
                    className="absolute top-6 right-6 p-1.5 bg-red-500 text-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"
                  >
                    <X size={14} />
                  </button>
                </div>
              )}
            </form>

            <div className="space-y-4">
              <div className="flex items-center justify-between sticky top-0 bg-white py-2 z-10">
                <h3 className="text-xl font-bold">Kitchen Inventory</h3>
                <span className="text-[10px] bg-green-100 text-green-700 px-3 py-1 rounded-full font-black tracking-widest uppercase">Live Menu</span>
              </div>
              <div className="space-y-3 overflow-y-auto pr-2">
                {products.length === 0 ? (
                  <p className="text-slate-400 italic text-center py-10">The bakery is empty! Add some treats.</p>
                ) : (
                  products.map(p => (
                    <div key={p.id} className="flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100 group hover:border-pink-200 transition-all hover:shadow-sm">
                      <div className="flex items-center gap-4">
                        <img src={p.image} className="w-14 h-14 rounded-xl object-cover shadow-sm ring-2 ring-white" alt="" />
                        <div>
                          <p className="font-black text-slate-800 leading-tight">{p.name}</p>
                          <p className="text-pink-500 font-bold text-sm">${p.price.toFixed(2)}</p>
                        </div>
                      </div>
                      <button 
                        onClick={() => onDelete(p.id)} 
                        className="p-3 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all"
                        title="Delete Treat"
                      >
                        <Trash2 size={20} />
                      </button>
                    </div>
                  ))
                )}
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default function App() {
  const [cart, setCart] = useState([]);
  const [isCartOpen, setIsCartOpen] = useState(false);
  const [isPortalOpen, setIsPortalOpen] = useState(false);
  const [activeCategory, setActiveCategory] = useState("All");
  const [products, setProducts] = useState(INITIAL_PRODUCTS);

  const addToCart = (product) => {
    setCart([...cart, product]);
    setIsCartOpen(true);
  };

  const removeFromCart = (index) => {
    const newCart = [...cart];
    newCart.splice(index, 1);
    setCart(newCart);
  };

  return (
    <div className="min-h-screen bg-white font-sans text-slate-900">
      {/* Navbar */}
      <nav className="fixed top-0 w-full bg-white/90 backdrop-blur-md z-50 border-b border-pink-100">
        <div className="max-w-7xl mx-auto px-4 h-20 flex items-center justify-between">
          <div className="flex items-center gap-2">
            <div className="w-10 h-10 bg-pink-500 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-pink-200">P</div>
            <span className="text-2xl font-bold text-slate-800 tracking-tight">Pastry Pup</span>
          </div>
          <div className="hidden md:flex items-center gap-8 font-medium text-slate-600">
            <a href="#shop" className="hover:text-pink-500 transition-colors font-bold">Bakery</a>
            <a href="#trivia" className="hover:text-pink-500 transition-colors font-bold">Trivia & Games</a>
            <a href="#about" className="hover:text-pink-500 transition-colors font-bold">Our Story</a>
            <button onClick={() => setIsPortalOpen(true)} className="flex items-center gap-1.5 text-pink-500 hover:text-pink-600 font-black border-l pl-8 border-slate-100">
              <Lock size={16} /> Portal
            </button>
          </div>
          <button onClick={() => setIsCartOpen(true)} className="relative p-2 text-slate-700 hover:bg-pink-50 rounded-full transition-all">
            <ShoppingBag size={24} />
            {cart.length > 0 && (
              <span className="absolute top-0 right-0 bg-pink-500 text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center border-2 border-white font-bold">{cart.length}</span>
            )}
          </button>
        </div>
      </nav>

      {/* Hero Section */}
      <section className="pt-32 pb-20 px-4 bg-gradient-to-b from-orange-50 to-white">
        <div className="max-w-7xl mx-auto grid md:grid-cols-2 gap-12 items-center">
          <div className="space-y-6">
            <div className="inline-block px-4 py-1.5 bg-orange-100 text-orange-700 rounded-full text-sm font-semibold tracking-wide uppercase">
              Founder: Lucy ‚Ä¢ Handmade for Humans
            </div>
            <h1 className="text-5xl md:text-7xl font-extrabold text-slate-900 leading-tight">
              Baked for <span className="text-pink-500">Humans</span>,<br/> Inspired by <span className="text-orange-500 italic font-serif">Pups.</span>
            </h1>
            <p className="text-xl text-slate-600 max-w-lg">
              Lucy's famous dog-themed treats for people. Whimsical, delicious, and 100% human-safe.
            </p>
            <div className="flex flex-wrap gap-4">
              <a href="#shop" className="px-8 py-4 bg-slate-900 text-white rounded-2xl font-bold hover:bg-slate-800 transition-all flex items-center gap-2 shadow-lg">
                Shop the Bakery <ChevronRight size={20} />
              </a>
              <a href="#trivia" className="px-8 py-4 bg-white border-2 border-slate-200 text-slate-900 rounded-2xl font-bold hover:border-pink-300 transition-all">
                Play Arcade Games
              </a>
            </div>
          </div>
          <div className="relative">
            <img src="https://images.unsplash.com/photo-1495147466023-ac5c588e2e94?auto=format&fit=crop&q=80&w=600" alt="Gourmet Pastries" className="rounded-[2.5rem] shadow-2xl relative z-10 w-full object-cover aspect-[4/5]" />
            <div className="absolute -bottom-6 -left-6 bg-white p-6 rounded-3xl shadow-xl z-20 flex items-center gap-4 border border-pink-50">
              <div className="w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center text-pink-600 font-bold text-xl">L</div>
              <p className="text-sm font-bold text-slate-700">Founder Lucy<br/><span className="text-slate-400 font-normal underline decoration-pink-200">Chief Baker</span></p>
            </div>
          </div>
        </div>
      </section>

      {/* Bakery Section */}
      <section id="shop" className="py-24 px-4 max-w-7xl mx-auto">
        <div className="mb-12 text-center md:text-left">
          <h2 className="text-4xl font-black mb-4">Lucy's Bakery Menu</h2>
          <p className="text-slate-500 mb-6">Explore our dog-inspired treats (for humans only!)</p>
          <div className="flex gap-2 overflow-x-auto pb-4 justify-center md:justify-start">
            {["All", "Signature Sweets", "Loaves & Cakes", "Breakfast Treats"].map(cat => (
              <button key={cat} onClick={() => setActiveCategory(cat)} className={`px-6 py-2 rounded-full font-bold transition-all whitespace-nowrap ${activeCategory === cat ? 'bg-pink-500 text-white shadow-lg' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}>{cat}</button>
            ))}
          </div>
        </div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-10">
          {products.filter(p => activeCategory === "All" || p.category === activeCategory).map(product => (
            <div key={product.id} className="group cursor-pointer">
              <div className="relative aspect-square overflow-hidden rounded-[2.5rem] bg-slate-100 mb-6 shadow-sm border border-slate-50">
                <img src={product.image} className="w-full h-full object-cover transition-transform group-hover:scale-110 duration-700" alt={product.name} />
                <div className="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity" />
                <button 
                  onClick={() => addToCart(product)} 
                  className="absolute bottom-6 right-6 bg-white p-5 rounded-2xl shadow-xl opacity-0 group-hover:opacity-100 transition-all translate-y-4 group-hover:translate-y-0 text-pink-500 hover:bg-pink-500 hover:text-white"
                >
                  <ShoppingBag size={24} />
                </button>
              </div>
              <p className="text-xs font-black text-orange-500 uppercase tracking-[0.2em] mb-2">{product.category}</p>
              <h3 className="text-2xl font-black text-slate-900 group-hover:text-pink-500 transition-colors">{product.name}</h3>
              <p className="text-slate-500 text-sm mt-2 line-clamp-2 leading-relaxed">{product.description}</p>
              <p className="text-xl font-black mt-4 text-slate-900 bg-slate-50 inline-block px-3 py-1 rounded-lg border border-slate-100">${product.price.toFixed(2)}</p>
            </div>
          ))}
        </div>
      </section>

      {/* Arcade */}
      <section id="trivia" className="bg-slate-50 py-24 px-4 overflow-hidden">
        <div className="max-w-7xl mx-auto">
          <div className="flex items-center gap-4 mb-12">
            <div className="w-14 h-14 bg-slate-900 text-white rounded-2xl flex items-center justify-center"><Gamepad2 size={32} /></div>
            <div>
              <h2 className="text-4xl font-black">The Dog-House Arcade</h2>
              <p className="text-slate-500">Wait for your cookies to bake and have some fun!</p>
            </div>
          </div>
          <div className="grid lg:grid-cols-2 gap-8">
            <div className="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col justify-between">
              <div>
                <div className="inline-block px-3 py-1 bg-blue-100 text-blue-600 rounded-full text-xs font-bold uppercase mb-4">Web App</div>
                <h3 className="text-3xl font-bold mb-4">Disney Persona Trivia</h3>
                <p className="text-slate-600 mb-8 leading-relaxed">Which Disney character is actually your kindred spirit? Are you more of a Mickey, a Stitch, or a Goofy?</p>
                <div className="space-y-4">
                  <div className="flex items-center gap-3 text-slate-700 font-medium"><UserCircle className="text-blue-500" size={20}/> 10+ Disney Personas</div>
                  <div className="flex items-center gap-3 text-slate-700 font-medium"><Trophy className="text-blue-500" size={20}/> Shareable Results</div>
                </div>
              </div>
              <button className="w-full mt-10 py-4 bg-blue-500 text-white rounded-2xl font-bold hover:bg-blue-600 transition-all shadow-lg shadow-blue-100">Launch Trivia App</button>
            </div>
            <CatchTheTreat />
          </div>
        </div>
      </section>

      {/* Story */}
      <section id="about" className="py-24 px-4 bg-white relative overflow-hidden">
        <div className="max-w-5xl mx-auto">
          <div className="grid md:grid-cols-2 gap-16 items-center">
            <div className="space-y-6">
              <div className="w-16 h-16 bg-pink-100 rounded-2xl flex items-center justify-center text-pink-600"><Sparkles size={32} /></div>
              <h2 className="text-4xl font-black text-slate-900">It All Started at Dollarama...</h2>
              <div className="space-y-4 text-lg text-slate-600 leading-relaxed">
                <p>Pastry Pup was born from a little spark of inspiration! While shopping at <strong>Dollarama</strong>, <strong>Lucy</strong> spotted a "Business Starting Kit."</p>
                <div className="p-5 bg-gradient-to-br from-pink-50 to-orange-50 rounded-3xl border border-pink-100 shadow-sm">
                  <h4 className="flex items-center gap-2 font-bold text-slate-800 mb-2"><PartyPopper size={20} className="text-pink-500" /> Such a Fun Project!</h4>
                  <p className="text-slate-600 italic">This website has been such a fun project for the whole family! Built with the help of <strong>Daddy and Artificial Intelligence</strong>.</p>
                </div>
                <p>Today, we're proud to serve dog-themed treats that are 100% made for humans.</p>
              </div>
              <div className="pt-4 flex flex-col gap-4">
                <div className="flex items-center gap-4">
                  <div className="w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center text-white"><Rocket size={20} /></div>
                  <span className="font-bold text-slate-900 uppercase tracking-widest text-sm">Founded by Lucy</span>
                </div>
                <div className="flex items-center gap-3 text-slate-500 text-sm italic"><Users size={16} /> Two siblings cheering her on!</div>
              </div>
            </div>
            <div className="relative">
              <div className="absolute inset-0 bg-pink-200 rounded-[3rem] rotate-3 -z-10 opacity-30"></div>
              <img src="https://images.unsplash.com/photo-1513151233558-d860c5398176?auto=format&fit=crop&q=80&w=500" alt="Celebration" className="rounded-[3rem] shadow-xl w-full" />
              <div className="absolute -bottom-4 -right-4 bg-white p-4 rounded-2xl shadow-lg border border-slate-100 flex items-center gap-3">
                <div className="p-2 bg-blue-100 rounded-lg text-blue-600"><Cpu size={20} /></div>
                <span className="text-xs font-bold text-slate-700">Built with Dad & AI</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="bg-slate-900 text-white py-16 px-4">
        <div className="max-w-7xl mx-auto grid md:grid-cols-3 gap-12">
          <div className="space-y-4">
            <div className="flex items-center gap-2">
              <div className="w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-white font-bold text-sm">P</div>
              <span className="text-xl font-bold">Pastry Pup</span>
            </div>
            <p className="text-slate-400 text-sm">Human treats for dog people. Founded by Lucy. Built with Dad & AI.</p>
            <button onClick={() => setIsPortalOpen(true)} className="text-xs text-slate-600 hover:text-pink-400 flex items-center gap-1 transition-colors group">
              <Lock size={12} className="group-hover:text-pink-500 transition-colors" /> Baker Portal Access
            </button>
          </div>
          <div className="flex gap-12">
            <div>
              <h4 className="font-bold mb-4">Bakery</h4>
              <ul className="space-y-2 text-sm text-slate-400">
                <li className="hover:text-pink-400 cursor-pointer transition-colors">Menu</li>
                <li className="hover:text-pink-400 cursor-pointer transition-colors">Orders</li>
              </ul>
            </div>
            <div>
              <h4 className="font-bold mb-4">Arcade</h4>
              <ul className="space-y-2 text-sm text-slate-400">
                <li className="hover:text-pink-400 cursor-pointer transition-colors">Disney Trivia</li>
                <li className="hover:text-pink-400 cursor-pointer transition-colors">Cookie Catcher</li>
              </ul>
            </div>
          </div>
          <div className="space-y-4">
            <h4 className="font-bold">Bark for Updates</h4>
            <div className="flex gap-2">
              <input type="email" placeholder="Your email" className="flex-1 bg-white/10 border border-white/10 rounded-xl px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all"/>
              <button className="bg-pink-500 px-4 py-2 rounded-xl text-sm font-bold">Join</button>
            </div>
          </div>
        </div>
      </footer>

      {/* Modals */}
      <CartDrawer 
        isOpen={isCartOpen} 
        onClose={() => setIsCartOpen(false)} 
        cartItems={cart} 
        onRemove={removeFromCart} 
      />
      <BakerPortal 
        isOpen={isPortalOpen} 
        onClose={() => setIsPortalOpen(false)} 
        products={products} 
        onAdd={(p) => setProducts([p, ...products])} 
        onDelete={(id) => setProducts(products.filter(item => item.id !== id))} 
      />
    </div>
  );
}
